<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Smart Expert - Kachin Farming</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-slate-50 font-sans pb-10" onload="displayHistory()">

    <header class="bg-green-700 text-white p-4 shadow-lg sticky top-0 z-50">
        <div class="flex items-center justify-between max-w-md mx-auto">
            <a href="index.html"><i class="fa-solid fa-arrow-left text-xl"></i></a>
            <h1 class="text-lg font-bold flex-1 text-center">Expert AI á€¡á€€á€¼á€¶á€•á€±á€¸</h1>
        </div>
    </header>

    <main class="max-w-md mx-auto p-4 space-y-6">

        <section class="bg-white p-6 rounded-[2.5rem] shadow-sm border border-slate-100">
            <div class="space-y-4">
                <div>
                    <label class="block text-[10px] font-black text-slate-400 mb-2 uppercase tracking-widest">á€¡á€•á€„á€ºá€á€€á€ºá€á€™á€ºá€¸ (á€›á€€á€º)</label>
                    <input id="age" type="number" value="46" class="w-full bg-slate-50 border border-slate-200 p-4 rounded-2xl focus:ring-2 focus:ring-green-500 outline-none font-bold">
                </div>

                <div>
                    <label class="block text-[10px] font-black text-slate-400 mb-2 uppercase tracking-widest">á€™á€»á€­á€¯á€¸á€…á€±á€·á€¡á€™á€»á€­á€¯á€¸á€¡á€…á€¬á€¸</label>
                    <select id="maturity" class="w-full bg-slate-50 border border-slate-200 p-4 rounded-2xl outline-none font-bold">
                        <option value="early">á€á€€á€ºá€œá€»á€„á€ºá€™á€»á€­á€¯á€¸ (áˆá€-á‰á€ á€›á€€á€º)</option>
                        <option value="medium" selected>á€á€€á€ºá€œá€á€ºá€™á€»á€­á€¯á€¸ (áá€á€-ááá€ á€›á€€á€º)</option>
                        <option value="late">á€á€€á€ºá€€á€¼á€®á€¸á€™á€»á€­á€¯á€¸ (áá‚á€ á€›á€€á€º+)</option>
                    </select>
                </div>

                <div>
                    <label class="block text-[10px] font-black text-slate-400 mb-2 uppercase tracking-widest">á€¡á€•á€„á€ºá€¡á€™á€¼á€„á€·á€º (á€œá€€á€ºá€™)</label>
                    <input id="height" type="number" placeholder="á€¥á€•á€™á€¬ - áˆ" class="w-full bg-slate-50 border border-slate-200 p-4 rounded-2xl focus:ring-2 focus:ring-green-500 outline-none font-bold">
                </div>

                <button onclick="runExpertAI()" class="w-full bg-green-600 hover:bg-green-700 text-white font-black py-4 rounded-2xl shadow-lg transition-all active:scale-95 flex items-center justify-center gap-2">
                    <i class="fa-solid fa-wand-magic-sparkles"></i> á€¡á€€á€¼á€¶á€•á€¼á€¯á€á€»á€€á€ºá€á€±á€¬á€„á€ºá€¸á€™á€Šá€º
                </button>
            </div>
        </section>

        <div id="aiResponse" class="hidden animate-fade-in">
            <div class="bg-white p-6 rounded-[2.5rem] shadow-md border-2 border-green-500 relative">
                <div class="absolute -top-3 left-8 bg-green-500 text-white text-[10px] px-4 py-1 rounded-full font-black uppercase shadow-sm">
                    Expert Advice
                </div>
                <div id="adviceContent" class="text-slate-700 leading-relaxed text-sm pt-2"></div>
            </div>
        </div>

        <section class="bg-slate-100 p-6 rounded-[2.5rem]">
            <h3 class="text-slate-500 text-[10px] font-black mb-4 uppercase tracking-widest flex items-center gap-2">
                <i class="fa-solid fa-clock-rotate-left"></i> á€šá€á€„á€ºá€™á€¾á€á€ºá€á€™á€ºá€¸á€™á€»á€¬á€¸
            </h3>
            <div id="historyBox" class="space-y-3">
                <p class="text-xs text-slate-400 italic text-center">á€™á€¾á€á€ºá€á€™á€ºá€¸á€™á€›á€¾á€­á€á€±á€¸á€•á€«á‹</p>
            </div>
        </section>

    </main>

    <script>
        // 1. Expert Logic Config (Easily Updateable)
        const ExpertRules = {
            soybean: {
                minStuntedHeight: 12,
                bloomDays: { early: 35, medium: 45, late: 55 },
                advice: {
                    stunted: "âš ï¸ <b>á€¡á€•á€„á€ºá€€á€¼á€®á€¸á€‘á€½á€¬á€¸á€™á€¾á€¯ á€”á€¾á€±á€¸á€”á€±á€á€Šá€º-</b> NPK 21:21:21 á€”á€¾á€„á€·á€º á€¡á€™á€­á€¯á€„á€ºá€”á€­á€¯á€¡á€¬á€¸á€†á€±á€¸á€€á€­á€¯ á… á€›á€€á€ºá€á€¼á€¬á€¸ á€á€…á€ºá€€á€¼á€­á€™á€º á€–á€»á€”á€ºá€¸á€•á€±á€¸á€•á€«á‹",
                    bloom: "ğŸŒ¸ <b>á€¡á€•á€½á€„á€·á€ºá€•á€½á€„á€·á€ºá€á€»á€­á€”á€º-</b> NPK 0:42:56 á€á€­á€¯á€· á€•á€¼á€±á€¬á€„á€ºá€¸á€á€¯á€¶á€¸á€•á€¼á€®á€¸ á€›á€±á€á€½á€„á€ºá€¸á€”á€¾á€¯á€”á€ºá€¸ á€™á€¾á€”á€ºá€•á€«á€…á€±á‹",
                    normal: "ğŸŒ± <b>á€€á€¼á€®á€¸á€‘á€½á€¬á€¸á€†á€²-</b> á€¡á€•á€„á€ºá€á€”á€ºá€™á€¬á€…á€±á€›á€”á€º NPK 21:21:21 á€€á€­á€¯ á€†á€€á€ºá€á€¯á€¶á€¸á€•á€«á‹"
                }
            }
        };

        function runExpertAI() {
            const age = parseInt(document.getElementById('age').value);
            const height = parseInt(document.getElementById('height').value);
            const maturity = document.getElementById('maturity').value;
            const resDiv = document.getElementById('aiResponse');
            const content = document.getElementById('adviceContent');

            let finalAdvice = "";

            // Logic Decision Tree
            if (height < ExpertRules.soybean.minStuntedHeight && age > 40) {
                finalAdvice = ExpertRules.soybean.advice.stunted;
            } else if (age >= ExpertRules.soybean.bloomDays[maturity]) {
                finalAdvice = ExpertRules.soybean.advice.bloom;
            } else {
                finalAdvice = ExpertRules.soybean.advice.normal;
            }

            content.innerHTML = finalAdvice;
            resDiv.classList.remove('hidden');

            saveToHistory(age, height, finalAdvice);
        }

        // 2. History Logic (Self-Training Memory)
        function saveToHistory(age, height, advice) {
            let history = JSON.parse(localStorage.getItem('farmHistory')) || [];
            const newEntry = {
                date: new Date().toLocaleDateString(),
                age: age,
                height: height,
                shortAdvice: advice.substring(0, 50) + "..."
            };
            history.unshift(newEntry);
            localStorage.setItem('farmHistory', JSON.stringify(history.slice(0, 5)));
            displayHistory();
        }

        function displayHistory() {
            const box = document.getElementById('historyBox');
            let history = JSON.parse(localStorage.getItem('farmHistory')) || [];
            
            if (history.length > 0) {
                box.innerHTML = history.map(item => `
                    <div class="bg-white p-4 rounded-2xl shadow-sm border border-slate-200">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-[9px] font-bold text-slate-400 uppercase">${item.date}</span>
                            <span class="text-[9px] font-bold text-green-600 bg-green-50 px-2 py-0.5 rounded-full">á€•á€²á€•á€¯á€•á€º</span>
                        </div>
                        <p class="text-[11px] text-slate-600 font-medium">
                            á€á€€á€ºá€á€™á€ºá€¸ ${item.age} á€›á€€á€º | á€¡á€™á€¼á€„á€·á€º ${item.height} á€œá€€á€ºá€™
                        </p>
                    </div>
                `).join('');
            }
        }
    </script>

    <style>
        .animate-fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</body>
</html>
